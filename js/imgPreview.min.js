"use strict";function _classCallCheck(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,i){for(var t=0;t<i.length;t++){var n=i[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(i,t,n){return t&&e(i.prototype,t),n&&e(i,n),i}}();!function(e){e.imgPreview=function(e){return new i(e)};var i=function(){function i(e){_classCallCheck(this,i),this.init(e)}return _createClass(i,[{key:"init",value:function(i){var t=this;this.config=e.extend(!0,{},{el:"[data-pic]",attr:"data-pic",attrTitle:"data-pic-title",attrDesc:"data-pic-desc",mode:"single",isMaskShow:!0},i),this.allDom().each(function(i,n){var o=t;e(n).off("click").on("click",function(e){return o.preview(n)})})}},{key:"preview",value:function(i){var t=this,n=e(window),o=e("body"),r=n.width(),a=n.height(),c=e(i),v=c.attr(t.config.attr),s=c.attr(t.config.attrTitle),l=c.attr(t.config.attrDesc),f=event.clientY,g=event.clientX;if(t.imgPreviewMask=e('<div class="img-preview-mask"></div>'),t.imgPreviewPopover=e('<div class="img-preview-popover" style="top: '+f+"px;left: "+g+'px;"></div>'),t.imgPreviewBox=e('<div class="img-preview-box"></div>'),t.imgPreviewFoot=e('<div class="img-preview-foot"></div>'),"single"===t.config.mode){var d=new Image,p=function(i,n){i=i>=r?r-40:i,n=n>=a?a-40:n,t.imgPreviewBox.append(e('<img src="'+v+'"/>')).click(function(){t.hide()}),t.config.isMaskShow&&(o.append(t.imgPreviewMask),t.imgPreviewMask.click(function(){t.hide()})),t.config.attrTitle&&t.imgPreviewFoot.append(e('<div class="img-foot-title">'+(s||"")+"</div>")),t.config.attrDesc&&t.imgPreviewFoot.append(e('<div class="img-foot-desc">'+(l||"")+"</div>")),t.imgPreviewPopover.append(t.imgPreviewBox).append(t.imgPreviewFoot),o.append(t.imgPreviewPopover),e.fn&&e.fn.jquery?t.imgPreviewPopover.css({width:i,height:n}).animate({top:(a-n)/2,left:(r-i)/2},300):t.imgPreviewPopover.css({width:i,height:n,top:(a-n)/2,left:(r-i)/2})};d.onload=function(){d.onload=null,p(d.width,d.height)},d.onerror=function(){alert("很抱歉，图片加载失败！")},d.src=v}}},{key:"hide",value:function(){this.imgPreviewMask.remove(),this.imgPreviewPopover.remove()}},{key:"allDom",value:function(){return e(this.config.el)}}]),i}()}(window.Zepto||window.jQuery);